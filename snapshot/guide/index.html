<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>Micronaut Coherence</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8" />
    <link rel="stylesheet" href="../css/custom.css" type="text/css" media="screen, print" title="Style" charset="utf-8" />
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8" />
    <link rel="stylesheet" href="../css/highlight/agate.css">
    <script src="../js/highlight.pack.js"></script>
    <script src="../js/guide.js"></script>
    <script src="../js/multi-language-sample.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <link rel="stylesheet" href="../css/multi-language-sample.css"/>
    <script src="../js/docs.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.5.13/clipboard.min.js"></script>
    <script type="text/javascript">
        function addJsClass(el) {
            var classes = document.body.className.split(" ");
            classes.push("js");
            document.body.className = classes.join(" ");
        }
    </script>

</head>

<body class="body" id="docs" onload="addJsClass();" onhashchange="highlightMenu()">

<div id="table-of-content-nav-link" class="desktop">
    <a id="theme-switcher" title="Switch to dark theme" href="javascript:switchTheme(true)"><i class="fa fa-moon-o"></i></a>
    <a title="Collapse/Open Table of contents" title="Hide Table of Contents" href="javascript:hideTableOfContents();" class="button">[ + ]</a>
</div>

<div id="main">
    <div id="navigation" class="no-print">
        <div class="navTitle">
            <span id="logo"><a href="http://micronaut.io" title="Go to Micronaut Website"><img src="../img/micronaut-logo-white.svg" alt="Micronaut"/></a></span>
        </div>
        <div class="navLinks">
            <ul>
                    <li><div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)" class="desktop">
                            <a href="../guide/index.html" class="button">Table of contents</a>
                            <div id="nav-summary-childs" style="display:none;">
                                
                                <div class="toc-item" style="margin-left:0"><a href="#introduction"><strong>1</strong><span>Introduction</span></a></div>
                                
                                <div class="toc-item" style="margin-left:0"><a href="#releaseHistory"><strong>2</strong><span>Release History</span></a></div>
                                
                                <div class="toc-item" style="margin-left:0"><a href="#quickStart"><strong>3</strong><span>Coherence Quick Start</span></a></div>
                                
                                <div class="toc-item" style="margin-left:0"><a href="#bootstrap"><strong>4</strong><span>Bootstraping Coherence</span></a></div>
                                
                                <div class="toc-item" style="margin-left:0"><a href="#injection"><strong>5</strong><span>Inject Coherence Resources into Beans</span></a></div>
                                
                                <div class="toc-item" style="margin-left:0"><a href="#filterBinding"><strong>6</strong><span>Filter Binding Annotations</span></a></div>
                                
                                <div class="toc-item" style="margin-left:0"><a href="#valueExtractorBinding"><strong>7</strong><span>Extractor Binding Annotations</span></a></div>
                                
                                <div class="toc-item" style="margin-left:0"><a href="#transientInjection"><strong>8</strong><span>Injection into Deserialized Objea cts</span></a></div>
                                
                                <div class="toc-item" style="margin-left:0"><a href="#coherenceXmlInjection"><strong>9</strong><span>Injection of Beans into the Coherence Configuration</span></a></div>
                                
                                <div class="toc-item" style="margin-left:0"><a href="#grpc"><strong>10</strong><span>Using gRPC</span></a></div>
                                
                                <div class="toc-item" style="margin-left:0"><a href="#coherenceHttpSessions"><strong>11</strong><span>Using Coherence to store HTTP sessions</span></a></div>
                                
                                <div class="toc-item" style="margin-left:0"><a href="#repository"><strong>12</strong><span>Repository</span></a></div>
                                
                            </div>
                        </div>
                    </li>

                <li id="table-of-content-nav-link-mobile" class="mobile">
                    <a title="Scroll to Table of contents" href="javascript:scrollToTop();" class="button">Toc</a>
                </li>
                <li class="desktop">
                    <a title="Go to API documentation" href="../api/index.html" class="button">API Reference</a>
                </li>
                <li class="mobile">
                    <a title="Go to API documentation" href="../api/index.html" class="button">API</a>
                </li>
                <li class="desktop">
                    <a title="Go to Configuration Reference documentation" href="../guide/configurationreference.html" class="button">Configuration Reference</a>
                </li>
                <li class="mobile">
                    <a title="Go to Configuration Reference documentation" href="../guide/configurationreference.html" class="button">Conf</a>
                </li>
            </ul>

        </div>
    </div>
    
    <div id="table-of-content">
        <div class="toc-content">

        <h2>Table of Contents</h2>
        
        <div class="toc-item" style="margin-left:0px" id="toc-item-introduction"><a href="#introduction"><strong>1</strong><span>Introduction</span></a></div>
        
        <div class="toc-item" style="margin-left:0px" id="toc-item-releaseHistory"><a href="#releaseHistory"><strong>2</strong><span>Release History</span></a></div>
        
        <div class="toc-item" style="margin-left:0px" id="toc-item-quickStart"><a href="#quickStart"><strong>3</strong><span>Coherence Quick Start</span></a></div>
        
        <div class="toc-item" style="margin-left:0px" id="toc-item-bootstrap"><a href="#bootstrap"><strong>4</strong><span>Bootstraping Coherence</span></a></div>
        
        <div class="toc-item" style="margin-left:10px" id="toc-item-defaultSession"><a href="#defaultSession"><strong>4.1</strong><span>Using the Default Session</span></a></div>
        
        <div class="toc-item" style="margin-left:0px" id="toc-item-injection"><a href="#injection"><strong>5</strong><span>Inject Coherence Resources into Beans</span></a></div>
        
        <div class="toc-item" style="margin-left:10px" id="toc-item-injectNamedMap"><a href="#injectNamedMap"><strong>5.1</strong><span>Injecting NamedMap &amp; NamedCache</span></a></div>
        
        <div class="toc-item" style="margin-left:20px" id="toc-item-injectNamedMapWithName"><a href="#injectNamedMapWithName"><strong>5.1.1</strong><span>Specify the Cache Name</span></a></div>
        
        <div class="toc-item" style="margin-left:20px" id="toc-item-injectNamedMapFromNamedSession"><a href="#injectNamedMapFromNamedSession"><strong>5.1.2</strong><span>Specifying the Owning Session</span></a></div>
        
        <div class="toc-item" style="margin-left:20px" id="toc-item-injectAsyncNamedMap"><a href="#injectAsyncNamedMap"><strong>5.1.3</strong><span>Injecting AsyncNamedMap &amp; AsyncNamedCache</span></a></div>
        
        <div class="toc-item" style="margin-left:20px" id="toc-item-injectViews"><a href="#injectViews"><strong>5.1.4</strong><span>Injecting Views (CQC)</span></a></div>
        
        <div class="toc-item" style="margin-left:10px" id="toc-item-injectNamedTopic"><a href="#injectNamedTopic"><strong>5.2</strong><span>Injecting NamedTopic</span></a></div>
        
        <div class="toc-item" style="margin-left:20px" id="toc-item-injectNamedTopicWithName"><a href="#injectNamedTopicWithName"><strong>5.2.1</strong><span>Specify the Topic Name</span></a></div>
        
        <div class="toc-item" style="margin-left:20px" id="toc-item-injectNamedTopicFromNamedSession"><a href="#injectNamedTopicFromNamedSession"><strong>5.2.2</strong><span>Specifying the Owning Session</span></a></div>
        
        <div class="toc-item" style="margin-left:20px" id="toc-item-injectTopicPublisher"><a href="#injectTopicPublisher"><strong>5.2.3</strong><span>Injecting a NamedTopic Publisher</span></a></div>
        
        <div class="toc-item" style="margin-left:30px" id="toc-item-injectTopicPublisherForTopic"><a href="#injectTopicPublisherForTopic"><strong>5.2.3.1</strong><span>Specify the Topic Name</span></a></div>
        
        <div class="toc-item" style="margin-left:30px" id="toc-item-injectTopicPublisherForSession"><a href="#injectTopicPublisherForSession"><strong>5.2.3.2</strong><span>Specify the Owning Session</span></a></div>
        
        <div class="toc-item" style="margin-left:20px" id="toc-item-injectTopicSubscriber"><a href="#injectTopicSubscriber"><strong>5.2.4</strong><span>Injecting a NamedTopic Subscriber</span></a></div>
        
        <div class="toc-item" style="margin-left:30px" id="toc-item-injectTopicSubscriberForTopic"><a href="#injectTopicSubscriberForTopic"><strong>5.2.4.1</strong><span>Specify the Topic Name</span></a></div>
        
        <div class="toc-item" style="margin-left:30px" id="toc-item-injectTopicSubscriberForSession"><a href="#injectTopicSubscriberForSession"><strong>5.2.4.2</strong><span>Specify the Owning Session</span></a></div>
        
        <div class="toc-item" style="margin-left:30px" id="toc-item-injectTopicSubscriberFiltered"><a href="#injectTopicSubscriberFiltered"><strong>5.2.4.3</strong><span>Filtering Messages</span></a></div>
        
        <div class="toc-item" style="margin-left:30px" id="toc-item-injectTopicSubscriberTransformed"><a href="#injectTopicSubscriberTransformed"><strong>5.2.4.4</strong><span>Transforming Messages</span></a></div>
        
        <div class="toc-item" style="margin-left:10px" id="toc-item-injectSession"><a href="#injectSession"><strong>5.3</strong><span>Injecting a Session</span></a></div>
        
        <div class="toc-item" style="margin-left:20px" id="toc-item-injectNamedSession"><a href="#injectNamedSession"><strong>5.3.1</strong><span>Specify the Session Name</span></a></div>
        
        <div class="toc-item" style="margin-left:0px" id="toc-item-filterBinding"><a href="#filterBinding"><strong>6</strong><span>Filter Binding Annotations</span></a></div>
        
        <div class="toc-item" style="margin-left:0px" id="toc-item-valueExtractorBinding"><a href="#valueExtractorBinding"><strong>7</strong><span>Extractor Binding Annotations</span></a></div>
        
        <div class="toc-item" style="margin-left:0px" id="toc-item-transientInjection"><a href="#transientInjection"><strong>8</strong><span>Injection into Deserialized Objea cts</span></a></div>
        
        <div class="toc-item" style="margin-left:10px" id="toc-item-injectable"><a href="#injectable"><strong>8.1</strong><span>Making transient classes Injectable</span></a></div>
        
        <div class="toc-item" style="margin-left:0px" id="toc-item-coherenceXmlInjection"><a href="#coherenceXmlInjection"><strong>9</strong><span>Injection of Beans into the Coherence Configuration</span></a></div>
        
        <div class="toc-item" style="margin-left:0px" id="toc-item-grpc"><a href="#grpc"><strong>10</strong><span>Using gRPC</span></a></div>
        
        <div class="toc-item" style="margin-left:10px" id="toc-item-grpcProxy"><a href="#grpcProxy"><strong>10.1</strong><span>Configure a gRPC Proxy Service</span></a></div>
        
        <div class="toc-item" style="margin-left:10px" id="toc-item-grpcClient"><a href="#grpcClient"><strong>10.2</strong><span>Using a gRPC Client</span></a></div>
        
        <div class="toc-item" style="margin-left:0px" id="toc-item-coherenceHttpSessions"><a href="#coherenceHttpSessions"><strong>11</strong><span>Using Coherence to store HTTP sessions</span></a></div>
        
        <div class="toc-item" style="margin-left:0px" id="toc-item-repository"><a href="#repository"><strong>12</strong><span>Repository</span></a></div>
        
        </div>
    </div>
    
    <div class="docs-content">
    <div class="project">
        <h1>Micronaut Coherence</h1>
        <p></p>
        <p>Integration between Micronaut and Oracle Coherence</p>
        <p><strong>Version:</strong> <select style='max-width: 200px' onChange='window.document.location.href=this.options[this.selectedIndex].value;'><option selected='selected' value='https://micronaut-projects.github.io/micronaut-coherence/snapshot/guide/index.html'>SNAPSHOT</option></select></p>
    </div>
    
<h1 id="introduction"><a class="anchor" href="#introduction"></a>1 Introduction</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/introduction.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p><a href="https://coherence.community/">Coherence</a> is a scalable, fault-tolerant, cloud-ready, distributed platform for building grid-based applications and reliably storing data. The product is used at scale, for both compute and raw storage, in a vast array of industries such as critical financial trading systems, high performance telecommunication products and eCommerce applications.</p>
</div>
<div class="paragraph">
<p>Micronaut features dedicated support to bootstrap Coherence and for both injection of Coherence resources into beans and injection of beans into Coherence resources. Micronaut Injection simplifies application code as Coherence maps, caches and topics are just injected instead of being obtained via Coherence APIs.</p>
</div>
<div class="paragraph">
<p>Using annotated event listener methods simplifies building reactive code that responds to Coherence cache events.</p>
</div>

<h1 id="releaseHistory"><a class="anchor" href="#releaseHistory"></a>2 Release History</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/releaseHistory.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>For this project, you can find a list of releases (with release notes) here:</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/micronaut-projects/micronaut-coherence/releases">https://github.com/micronaut-projects/micronaut-coherence/releases</a></p>
</div>

<h1 id="quickStart"><a class="anchor" href="#quickStart"></a>3 Coherence Quick Start</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/quickStart.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>To add support for Oracle Coherence to an existing project, you should first add the Micronaut Coherence configuration to your build configuration. For example:</p>
</div>
<div class="paragraph">
<p>        <div class="listingblock multi-language-sample">
<div class="title"></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-kotlin hljs" data-lang="gradle">implementation(<span class="hljs-string">"io.micronaut.coherence:micronaut-coherence")</span></code></pre>
</div>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="maven">&lt;dependency&gt;
    &lt;groupId&gt;io.micronaut.coherence&lt;/groupId&gt;
    &lt;artifactId&gt;micronaut-coherence&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</p>
</div>
<div class="paragraph">
<p>Next you also need to add the version of Coherence that your application will be using.</p>
</div>
<div class="paragraph">
<p>For example, to use Coherence CE:</p>
</div>
<div class="paragraph">
<p>        <div class="listingblock multi-language-sample">
<div class="title"></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-kotlin hljs" data-lang="gradle">implementation(<span class="hljs-string">"com.oracle.coherence.ce:coherence:20.12.1")</span></code></pre>
</div>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="maven">&lt;dependency&gt;
    &lt;groupId&gt;com.oracle.coherence.ce&lt;/groupId&gt;
    &lt;artifactId&gt;coherence&lt;/artifactId&gt;
    &lt;version&gt;20.12.1&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</p>
</div>
<div class="paragraph">
<p>or to use a commercial version Coherence:</p>
</div>
<div class="paragraph">
<p>        <div class="listingblock multi-language-sample">
<div class="title"></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-kotlin hljs" data-lang="gradle">implementation(<span class="hljs-string">"com.oracle.coherence:coherence:14.1.1-0-1")</span></code></pre>
</div>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="maven">&lt;dependency&gt;
    &lt;groupId&gt;com.oracle.coherence&lt;/groupId&gt;
    &lt;artifactId&gt;coherence&lt;/artifactId&gt;
    &lt;version&gt;14.1.1-0-1&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Coherence CE versions are available from Maven Central.
Commercial versions of Coherence need to be uploaded into your own Maven repository.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There is no minimal configuration required to bootstrap Coherence.
If no specific configuration is provided Coherence will run with default values.
Some Coherence functionality can be configured using System properties, these properties by adding properties to the <code>application.yaml</code> file, for example:</p>
</div>
<div class="listingblock">
<div class="title">Configure Coherence</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">coherence:
  cluster: test-cluster
  role: storage</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above configuration sets the cluster name to <code>test-cluster</code>, and the role name to <code>storage</code>.
Any Coherence system property (prefixed with <code>coherence.</code>) specified in the Micronaut configuration
will then be picked up by Coherence at runtime.</p>
</div>

<h1 id="bootstrap"><a class="anchor" href="#bootstrap"></a>4 Bootstraping Coherence</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/bootstrap.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Coherence resources in a Micronaut application are typically owned by a Coherence <code>Session</code>.
By default Coherence will start a default Session, which can be configured.
Alternatively one or more other named Sessions can be configured and used by the application.</p>
</div>

<h2 id="defaultSession"><a class="anchor" href="#defaultSession"></a>4.1 Using the Default Session</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/bootstrap/defaultSession.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>The simplest configuration, applicable to the majority of applications that only require a single <code>Session</code>, is
to just configure and use the default <code>Session</code>. If the application is a Coherence cluster member, or an Extend client,
then all that needs to be specified is the Coherence configuration file name (although even this is optional as
Coherence will use a default name of none is configured).
Alternatively, if the application is a Coherence gRPC client, the default Session can be configured as a gRPC Session
(see the gRPC Client documentation).</p>
</div>
<div class="paragraph">
<p>As already mentioned in the <a href="#quickStart">Quick Start</a> section, the name of the configuration file for the default session can be set in the Micronaut config, for example in the <code>application.yaml</code> file:</p>
</div>
<div class="listingblock">
<div class="title">application.yaml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">coherence:
  sessions:
    default:
      config: coherence-config.xml</code></pre>
</div>
</div>

<h1 id="injection"><a class="anchor" href="#injection"></a>5 Inject Coherence Resources into Beans</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/injection.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Micronaut, and dependency injection in general, make it easy for application classes to declare the dependencies they need and let the runtime provide them when necessary.
This makes the applications easier to develop, test and reason about, and the code extremely clean.</p>
</div>
<div class="paragraph">
<p>Micronaut Coherence allows you to do the same for Coherence objects, such as
<a href="https://coherence.community/20.12/api/java//com/tangosol/net/Session.html">Session</a>,
<a href="https://coherence.community/20.12/api/java//com/tangosol/net/NamedMap.html">NamedMap</a>,
<a href="https://coherence.community/20.12/api/java//com/tangosol/net/NamedCache.html">NamedCache</a>,
<a href="https://coherence.community/20.12/api/java//com/tangosol/net/ContinuousQueryCache.html">ContinuousQueryCache</a>,
<a href="https://coherence.community/20.12/api/java//com/tangosol/net/ConfigurableCacheFactory.html">ConfigurableCacheFactory</a>,
<a href="https://coherence.community/20.12/api/java//com/tangosol/net/Cluster.html">Cluster</a>, etc&#8230;&#8203;</p>
</div>

<h2 id="injectNamedMap"><a class="anchor" href="#injectNamedMap"></a>5.1 Injecting NamedMap & NamedCache</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/injection/injectNamedMap.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Coherence <a href="https://coherence.community/20.12/api/java//com/tangosol/net/NamedMap.html">NamedMap</a> and <a href="https://coherence.community/20.12/api/java//com/tangosol/net/NamedCache.html">NamedCache</a> instances can be injected as beans in Micronaut applications.
The mechanics of injecting <code>NamedMap</code> or <code>NamedCache</code> beans is identical, so any use of <code>NamedMap</code> in the examples below can be replaced with <code>NamedCache</code>. Other more specialized forms of <code>NamedMap</code> and <code>NamedCache</code> can also be injected,
for example the asynchronous forms of both classes, as well as views.</p>
</div>
<div class="paragraph">
<p>The simplest way to inject a <code>NamedMap</code> is to just annotate the injection point with <code>@javax.inject.Inject</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inject
private NamedMap&lt;String, Person&gt; people;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example the injection point field name is used to determine the cache name to inject,
so a <code>NamedMap</code> bean with an underlying cache name of <code>people</code> will be injected.</p>
</div>

<h2 id="injectNamedMapWithName"><a class="anchor" href="#injectNamedMapWithName"></a>5.1.1 Specify the Cache Name</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/injection/injectNamedMap/injectNamedMapWithName.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Sometimes the name of the map or cache being injected needs to be different to the injection point name.
This is always the case when injecting into method parameters as the parameter names are lost by the time the injection point is processed. In this case we can use the <a href="../api/io/micronaut/coherence/annotation/Name.html">@Name</a>
annotation to specify the underlying cache name.</p>
</div>
<div class="paragraph">
<p>The example below will inject a <code>NamedMap</code> that uses an underlying cache named <code>people</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inject
@Name("people")
private NamedMap&lt;String, Person&gt; map;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The same applies when injecting a constructor or method parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Singleton
public class SomeBean {
    @Inject
    public SomeBean(@Name("people") NamedMap&lt;String, Person&gt; map) {
        // ToDo:
    }
}</code></pre>
</div>
</div>

<h2 id="injectNamedMapFromNamedSession"><a class="anchor" href="#injectNamedMapFromNamedSession"></a>5.1.2 Specifying the Owning Session</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/injection/injectNamedMap/injectNamedMapFromNamedSession.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Whilst most applications probably use a single Coherence <a href="https://coherence.community/20.12/api/java//com/tangosol/net/Session.html">Session</a> there are uses-cases where an application may
have multiple sessions. In this case, when injecting a <code>NamedMap</code> the specific session can be specified
by annotating the injection point with <a href="../api/io/micronaut/coherence/annotation/SessionName.html">@SessionName</a>.</p>
</div>
<div class="paragraph">
<p>In the previous examples where no <code>@SessionName</code> was specified Coherence will use the default session to obtain the caches.</p>
</div>
<div class="paragraph">
<p>Assuming the application has multiple sessions configured, one of which is named <code>Catalog</code> the following example
injects a <code>NamedMap</code> from an underlying cache named <code>products</code> in the <code>Catalog</code> session.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inject
@SessionName("Catalog")
@Name("products")
private NamedMap&lt;String, Product&gt; map;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Again, the same annotation can be used on method parameter injection points.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Controller
public class CatalogController {
    @Inject
    public CatalogController(@SessionName("Catalog") @Name("products")
                             NamedMap&lt;String, Product&gt; products) {
        // ToDo:
    }
}</code></pre>
</div>
</div>

<h2 id="injectAsyncNamedMap"><a class="anchor" href="#injectAsyncNamedMap"></a>5.1.3 Injecting AsyncNamedMap & AsyncNamedCache</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/injection/injectNamedMap/injectAsyncNamedMap.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>It is possible to inject the asynchronous classes <a href="https://coherence.community/20.12/api/java//com/tangosol/net/AsyncNamedMap.html">AsyncNamedMap</a> and <a href="https://coherence.community/20.12/api/java//com/tangosol/net/AsyncNamedCache.html">AsyncNamedCache</a> as beans in exactly the same way as described above. Just change the type of the injection point to be <code>AsyncNamedMap</code> or <code>AsyncNamedCache</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inject
@Name("people")
private AsyncNamedMap&lt;String, Person&gt; map;</code></pre>
</div>
</div>

<h2 id="injectViews"><a class="anchor" href="#injectViews"></a>5.1.4 Injecting Views (CQC)</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/injection/injectNamedMap/injectViews.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>View (or <a href="https://coherence.community/20.12/api/java//com/tangosol/net/ContinuousQueryCache.html">ContinuousQueryCache</a>) beans can be injected by specifying the
<a href="../api/io/micronaut/coherence/annotation/View.html">@View</a> annotation at the injection point.
A view is a sub-set of the data in an underlying cache, controlled by a <a href="https://coherence.community/20.12/api/java//com/tangosol/util/Filter.html">Filter</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inject
@Name("people")
@View                                    <i class="conum" data-value="1"></i><b>(1)</b>
private NamedMap&lt;String, Person&gt; map;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The injection point has been annotated with <code>@View</code>, so the injected <code>NamedMap</code> will actually be an implementation
of a <code>ContinuousQueryCache</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the above example, no <code>Filter</code> has been specified, so the default behaviour is to use
an <a href="https://coherence.community/20.12/api/java//com/tangosol/util/filter/AlwaysFilter.html">AlwaysFilter</a>.
This means that the view will contain all the entries from the underlying cache (typically a distributed cache).
As a <code>ContinuousQueryCache</code> will hold keys and values locally in deserialized form this can often a better approach
than using a replicated cache.</p>
</div>
<div class="sect2">
<h3 id="_specify_a_view_filter">Specify a View Filter</h3>
<div class="paragraph">
<p>Filters are specified for views using a special filter binding annotation.
These are annotations that are themselves annotated with the meta-annotation
<a href="../api/io/micronaut/coherence/annotation/FilterBinding.html">@FilterBinding</a>.
The Micronaut Coherence framework comes with some built in implementations, for example
<a href="../api/io/micronaut/coherence/annotation/AlwaysFilter.html">@AlwaysFilter</a>,
and <a href="../api/io/micronaut/coherence/annotation/WhereFilter.html">@WhereFilter</a>,
and it is simple to implement other as required by applications
(see the <a href="#filterBinding">Filter Binding Annotation</a> section for more details).</p>
</div>
<div class="paragraph">
<p>For example, if there was a cache named "people", containing <code>Person</code> instances, and the application required a view
of that cache just containing <code>People</code> where the <code>lastName</code> attribute is equal to <code>Simpson</code> the <code>@WhereFilter</code>
filter binding annotation could be used to specify the <code>Filter</code>.
The <code>@WhereFilter</code> annotation produces a <code>Filter</code> created from a Coherence CohQL where clause,
in this case <code>lastName == 'Simpson'</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inject
@Name("people")
@View
@WhereFilter("lastName = 'Simpson'")
private NamedMap&lt;String, Person&gt; simpsons;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Other built-in or custom filter binding annotations can be used.
Multiple filter-binding annotations can be added to the same injection point to build up more complex
views. The <code>Filter</code> instances produced from each filter binding annotation will all be collected together in
an <a href="https://coherence.community/20.12/api/java//com/tangosol/util/filter/AllFilter.html">AllFilter</a>, which will logically AND then together.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inject
@Name("people")
@View
@WhereFilter("lastName = 'Simpson'")
@WhereFilter("age &gt; 10")
private NamedMap&lt;String, Person&gt; simpsons;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The view injected above will be all <code>People</code> with a <code>lastName</code> attribute equal to <code>Simpson</code> and an <code>age</code>
attribute greater than 10. Equivalent to <code>lastName = 'Simpson' &amp;&amp; age &gt; 10</code>.</p>
</div>
</div>

<h2 id="injectNamedTopic"><a class="anchor" href="#injectNamedTopic"></a>5.2 Injecting NamedTopic</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/injection/injectNamedTopic.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Coherence <a href="https://coherence.community/20.12/api/java//com/tangosol/net/topic/NamedTopic.html">NamedTopic</a>
instances can be injected as beans in Micronaut applications.</p>
</div>
<div class="paragraph">
<p>The simplest way to inject a <code>NamedTopic</code> is to just annotate the injection point with <code>@javax.inject.Inject</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inject
private NamedTopic&lt;Person&gt; people;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example the injection point field name is used to determine the topic name to inject,
so a <code>NamedTopic</code> bean with an underlying topic name of <code>people</code> will be injected.
s</p>
</div>

<h2 id="injectNamedTopicWithName"><a class="anchor" href="#injectNamedTopicWithName"></a>5.2.1 Specify the Topic Name</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/injection/injectNamedTopic/injectNamedTopicWithName.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Sometimes the name of the topic being injected needs to be different to the injection point name.
This is always the case when injecting into method parameters as the parameter names are lost by the time the injection point is processed. In this case we can use the <a href="../api/io/micronaut/coherence/annotation/Name.html">@Name</a>
annotation to specify the underlying cache name.</p>
</div>
<div class="paragraph">
<p>The example below will inject a <code>NamedTopic</code> that uses an underlying topic named <code>orders</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inject
@Name("people")
private NamedTopic&lt;Order&gt; orders;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The same applies when injecting a constructor or method parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Singleton
public class SomeBean {
    @Inject
    public SomeBean(@Name("orders") NamedTopic&lt;Order&gt; topic) {
        // ToDo:
    }
}</code></pre>
</div>
</div>

<h2 id="injectNamedTopicFromNamedSession"><a class="anchor" href="#injectNamedTopicFromNamedSession"></a>5.2.2 Specifying the Owning Session</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/injection/injectNamedTopic/injectNamedTopicFromNamedSession.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Whilst most applications probably use a single Coherence <a href="https://coherence.community/20.12/api/java//com/tangosol/net/Session.html">Session</a> there are uses-cases where an application may
have multiple sessions. In this case, when injecting a <code>NamedTopic</code> the specific session can be specified
by annotating the injection point with <a href="../api/io/micronaut/coherence/annotation/SessionName.html">@SessionName</a>.</p>
</div>
<div class="paragraph">
<p>In the previous examples where no <code>@SessionName</code> was specified Coherence will use the default session to obtain the caches.</p>
</div>
<div class="paragraph">
<p>For example, assume the application has multiple sessions configured, one of which is named <code>Customers</code>
For example, assume the application has multiple sessions configured, one of which is named <code>Customers</code>
the following code snippet injects a <code>NamedTopic</code> using an underlying topic named <code>orders</code> in the <code>Customers</code> session.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inject
@SessionName("Customers")
@Name("orders")
private NamedTopic&lt;Order&gt; topic;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Again, the same annotation can be used on method parameter injection points.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Controller
public class OrderProcessor {
    @Inject
    public OrderProcessor(@SessionName("Customers") @Name("orders")
                          NamedTopic&lt;Order&gt; orders) {
        // ToDo:
    }
}</code></pre>
</div>
</div>

<h2 id="injectTopicPublisher"><a class="anchor" href="#injectTopicPublisher"></a>5.2.3 Injecting a NamedTopic Publisher</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/injection/injectNamedTopic/injectTopicPublisher.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>If application code only needs to publish messages to a Coherence <code>NamedTopic</code> then instead of injecting a
<code>NamedTopic</code> bean, a <a href="https://coherence.community/20.12/api/java//com/tangosol/net/topic/Publisher.html">Publisher</a> bean can be injected.</p>
</div>
<div class="paragraph">
<p>The simplest way to inject a <code>Publisher</code> is just to annotate the injection point of type <code>Publisher</code> with <code>@Inject</code>,
for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inject
private Publisher&lt;Order&gt; orders;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The example above will inject a <code>Publisher</code> bean, the name of the underlying <code>NamedTopic</code> will be taken from the
name of the injection point, in this case <code>orders</code>.</p>
</div>

<h2 id="injectTopicPublisherForTopic"><a class="anchor" href="#injectTopicPublisherForTopic"></a>5.2.3.1 Specify the Topic Name</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/injection/injectNamedTopic/injectTopicPublisher/injectTopicPublisherForTopic.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>If the name of the injection point cannot be used as the <code>NamedTopic</code> name, which is always the case with injection points that are method or constructor parameters, then the <a href="../api/io/micronaut/coherence/annotation/Name.html">@Name</a> annotation can be used to specify the topic name.</p>
</div>
<div class="paragraph">
<p>For example, both of the code snippets below inject a <code>Publisher</code> that published to the <code>orders</code> topic:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inject
@Name("orders")
private Publisher&lt;Order&gt; orders;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Controller
public class OrderController {
    @Inject
    public OrderController(@Name("orders") Publisher&lt;Order&gt; topic) {
        // ToDo:
    }
}</code></pre>
</div>
</div>

<h2 id="injectTopicPublisherForSession"><a class="anchor" href="#injectTopicPublisherForSession"></a>5.2.3.2 Specify the Owning Session</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/injection/injectNamedTopic/injectTopicPublisher/injectTopicPublisherForSession.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>As with injection of <code>NamedTopics</code>, in applications using multiple <code>Session</code> instances, the name of the <code>Session</code> that
owns the underlying <code>NamedTopic</code> can be specified when injecting a <code>Publisher</code> by adding the
<a href="../api/io/micronaut/coherence/annotation/SessionName.html">@SessionName</a> annotation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inject
@Name("orders")
@SessionName("Customers")
private Publisher&lt;Order&gt; orders;</code></pre>
</div>
</div>

<h2 id="injectTopicSubscriber"><a class="anchor" href="#injectTopicSubscriber"></a>5.2.4 Injecting a NamedTopic Subscriber</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/injection/injectNamedTopic/injectTopicSubscriber.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>If application code only needs to subscribe to messages from a Coherence <code>NamedTopic</code> then instead of injecting a
<code>NamedTopic</code> bean, a <a href="https://coherence.community/20.12/api/java//com/tangosol/net/topic/Subscriber.html">Subscriber</a> bean can be injected.</p>
</div>
<div class="paragraph">
<p>The simplest way to inject a <code>Subscriber</code> is just to annotate the injection point of type <code>Subscriber</code> with <code>@Inject</code>,
for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inject
private Subscriber&lt;Order&gt; orders;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The example above will inject a <code>Subscriber</code> bean, the name of the underlying <code>NamedTopic</code> will be taken from the
name of the injection point, in this case <code>orders</code>.</p>
</div>

<h2 id="injectTopicSubscriberForTopic"><a class="anchor" href="#injectTopicSubscriberForTopic"></a>5.2.4.1 Specify the Topic Name</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/injection/injectNamedTopic/injectTopicSubscriber/injectTopicSubscriberForTopic.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>If the name of the injection point cannot be used as the <code>NamedTopic</code> name, which is always the case with injection points that are method or constructor parameters, then the <a href="../api/io/micronaut/coherence/annotation/Name.html">@Name</a> annotation can be used to specify the topic name.</p>
</div>
<div class="paragraph">
<p>For example, both of the code snippets below inject a <code>Subscriber</code> that subscribe to the <code>orders</code> topic:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inject
@Name("orders")
private Subscriber&lt;Order&gt; orders;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Controller
public class OrderController {
    @Inject
    public OrderController(@Name("orders") Subscriber&lt;Order&gt; topic) {
        // ToDo:
    }
}</code></pre>
</div>
</div>

<h2 id="injectTopicSubscriberForSession"><a class="anchor" href="#injectTopicSubscriberForSession"></a>5.2.4.2 Specify the Owning Session</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/injection/injectNamedTopic/injectTopicSubscriber/injectTopicSubscriberForSession.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>As with injection of <code>NamedTopics</code>, in applications using multiple <code>Session</code> instances, the name of the <code>Session</code> that
owns the underlying <code>NamedTopic</code> can be specified when injecting a <code>Subscriber</code> by adding the
<a href="../api/io/micronaut/coherence/annotation/SessionName.html">@SessionName</a> annotation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inject
@Name("orders")
@SessionName("Customers")
private Subscriber&lt;Order&gt; orders;</code></pre>
</div>
</div>

<h2 id="injectTopicSubscriberFiltered"><a class="anchor" href="#injectTopicSubscriberFiltered"></a>5.2.4.3 Filtering Messages</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/injection/injectNamedTopic/injectTopicSubscriber/injectTopicSubscriberFiltered.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>A <code>Subscriber</code> can filter the messages that it receives from the <code>NamedTopic</code> by using a
<a href="https://coherence.community/20.12/api/java//com/tangosol/util/Filter.html">Filter</a>.
Filtering of messages takes place on the server, so for use cases where the application is only interested in a sub-set of messages, this can be more efficient than bringing all messages back to the client for processing.</p>
</div>
<div class="paragraph">
<p>Filters are specified for a <code>Subscriber</code> using a special filter binding annotation.
These are annotations that are themselves annotated with the meta-annotation
<a href="../api/io/micronaut/coherence/annotation/FilterBinding.html">@FilterBinding</a>.
The Micronaut Coherence framework comes with some built in implementations, for example
<a href="../api/io/micronaut/coherence/annotation/AlwaysFilter.html">@AlwaysFilter</a>,
and <a href="../api/io/micronaut/coherence/annotation/WhereFilter.html">@WhereFilter</a>,
and it is simple to implement other as required by applications
(see the <a href="#filterBinding">Filter Binding Annotation</a> section for more details).</p>
</div>
<div class="paragraph">
<p>For example, both of the code snippets below inject a <code>Subscriber</code> that subscribe to the <code>orders</code> topic,
but only receives <code>Order</code> messages where the <code>productId</code> attribute is <code>AB1234</code>.
the <code>@WhereFilter</code> filter binding annotation is used to specify the <code>Filter</code>, as <code>@WhereFilter</code> takes a Coherence
CohQL where clause and converts it to a <code>Filter</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inject
@Name("orders")
@WhereFilter("productId = 'AB1234'")
private Subscriber&lt;Order&gt; orders;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Controller
public class OrderController {
    @Inject
    public OrderController(@Name("orders") @WhereFilter("productId = 'AB1234'") Subscriber&lt;Order&gt; topic) {
        // ToDo:
    }
}</code></pre>
</div>
</div>

<h2 id="injectTopicSubscriberTransformed"><a class="anchor" href="#injectTopicSubscriberTransformed"></a>5.2.4.4 Transforming Messages</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/injection/injectNamedTopic/injectTopicSubscriber/injectTopicSubscriberTransformed.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>A <code>Subscriber</code> can be configured to receive just a part of a <code>NamedTopic</code> message using a
<a href="https://coherence.community/20.12/api/java//com/tangosol/util/ValueExtractor.html">ValueExtractor</a>.
The message transformation happens on the server so in use-cases where a <code>Subscriber</code> only requires a part of a message, it can be much more efficient to extract the required parts on the server instead of bringing the full payload back to the client.</p>
</div>
<div class="paragraph">
<p>ValueExtractors are specified for a <code>Subscriber</code> using a special extractor binding annotation.
These are annotations that are themselves annotated with the meta-annotation
<a href="../api/io/micronaut/coherence/annotation/ExtractorBinding.html">@ExtractorBinding</a>.
The Micronaut Coherence framework comes with some built in implementations, for example
<a href="../api/io/micronaut/coherence/annotation/PropertyExtractor.html">@PropertyExtractor</a>,
and <a href="../api/io/micronaut/coherence/annotation/PofExtractor.html">@PofExtractor</a>,
and it is simple to implement other as required by applications
(see the <a href="#valueExtractorBinding">Extractor Binding Annotation</a> section for more details).</p>
</div>
<div class="paragraph">
<p>For example, assuming that there is a topic named <code>orders</code> containing <code>Order</code> instances as the payload.
If a <code>Subscriber</code> is required to subscribe to the <code>orders</code> topic, but only needs to receive the <code>productId</code> values,
then a <code>@PropertyExtractor</code> annotation could be used. A <code>@PropertyExtractor</code> specifies the name of a property to extract.</p>
</div>
<div class="paragraph">
<p>Both code snippets below will inject a <code>Subscriber</code> that just receives the <code>productId</code> property of <code>Orders</code> objects
from the <code>orders</code> topic.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inject
@Name("orders")
@PropertyExtractor("productId")
private Subscriber&lt;Order&gt; orders;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Controller
public class OrderController {
    @Inject
    public OrderController(@Name("orders") @PropertyExtractor("productId")
                           Subscriber&lt;Order&gt; topic) {
        // ToDo:
    }
}</code></pre>
</div>
</div>

<h2 id="injectSession"><a class="anchor" href="#injectSession"></a>5.3 Injecting a Session</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/injection/injectSession.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Sometimes it might not be possible to inject a Coherence resource, such as <code>NamedMap</code> or <code>NamedCache</code> directly because
the name of the resource to be injected is not known until runtime. In this case it makes sense to inject a
<a href="https://coherence.community/20.12/api/java/com/tangosol/net/Session.html">Session</a> instance which can then be used to obtain other resources.</p>
</div>
<div class="paragraph">
<p>The simplest way to inject a <code>Session</code> is just to annotate a field, method parameter, or other injection point.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Controller
public class MyBean {
    @Inject
    private Session session;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or into a constructor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Controller
public class MyBean {
    @Inject
    public MyBean(Session session) {
        // ToDo...
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Both examples above will inject the default <code>Session</code> instance into the injection point.</p>
</div>

<h2 id="injectNamedSession"><a class="anchor" href="#injectNamedSession"></a>5.3.1 Specify the Session Name</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/injection/injectSession/injectNamedSession.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>For most applications that only use a single <code>Session</code> the simple examples above will be all that is required.
Some applications though may use multiple named <code>Session</code> instances, in which case the <code>Session</code> name need to
be specified.
This can be done by adding the ../apiio/micronaut/coherence/annotation/Name.html[@Name] annotation to the injection point.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Controller
public class MyBean {
    @Inject
    @Name("Catalog")
    private Session session;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or into a constructor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Controller
public class MyBean {
    @Inject
    public MyBean(@Name("Catalog") Session session) {
        // ToDo...
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In both examples above the <code>Session</code> injected will be the <code>Catalog</code> session.
The named <code>Session</code> must have previously been configured when <a href="#bootstrap">bootstrapping Coherence</a>.</p>
</div>

<h1 id="filterBinding"><a class="anchor" href="#filterBinding"></a>6 Filter Binding Annotations</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/filterBinding.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>TBD&#8230;&#8203;</p>
</div>

<h1 id="valueExtractorBinding"><a class="anchor" href="#valueExtractorBinding"></a>7 Extractor Binding Annotations</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/valueExtractorBinding.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>TBD&#8230;&#8203;</p>
</div>

<h1 id="transientInjection"><a class="anchor" href="#transientInjection"></a>8 Injection into Deserialized Objea cts</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/transientInjection.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Using Micronaut to inject Coherence objects into your application classes, and Micronaut beans into Coherence-managed objects will
allow you to support many use cases where dependency injection may be useful, but it doesn&#8217;t cover an important use
case that is somewhat specific to Coherence.</p>
</div>
<div class="paragraph">
<p>Coherence is a distributed system, and it uses serialization in order to send both the data and the  processing requests
from one cluster member (or remote client) to another, as well as to store data, both in memory and on disk.</p>
</div>
<div class="paragraph">
<p>Processing requests, such as entry processors and aggregators, have to be deserialized on a target cluster member(s) in
order to be executed. In some cases, they could benefit from dependency injection in order to avoid service lookups.</p>
</div>
<div class="paragraph">
<p>Similarly, while the data is stored in a serialized, binary format, it may need to be deserialized into user supplied
classes for server-side processing, such as when executing entry processors and aggregators. In this case, data classes
can often also benefit from dependency injection (in order to support Domain-Driven Design (DDD), for example).</p>
</div>
<div class="paragraph">
<p>While these transient objects are not managed by the Micronaut container, Coherence Micronaut does support their injection during
deserialization, but for performance reasons requires that you explicitly opt-in by implementing
<code>com.oracle.coherence.inject.Injectable</code> interface.</p>
</div>

<h2 id="injectable"><a class="anchor" href="#injectable"></a>8.1 Making transient classes Injectable</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/transientInjection/injectable.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>While not technically a true marker interface, <code>com.oracle.coherence.inject.Injectable</code> can be treated as such for
all intents and purposes.
All you need to do is add it to the <code>implements</code> clause of your class in order for injection on deserialization to
kick in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class InjectableBean
        implements Injectable, Serializable {

    @Inject
    private Converter&lt;String, String&gt; converter;

    private String text;

    InjectableBean() {
    }

    InjectableBean(String text) {
        this.text = text;
    }

    String getConvertedText() {
        return converter.convert(text);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Assuming that you have the following <code>Converter</code> service implementation in your application, it will be injected
into <code>InjectableBean</code> during deserialization, and the <code>getConvertedText</code> method will return the value of the <code>text</code>
field converted to upper case:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ApplicationScoped
public class ToUpperConverter
        implements Converter&lt;String, String&gt; {
    @Override
    public String convert(String s) {
        return s.toUpperCase();
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If your <code>Injectable</code> class has <code>@PostConstruct</code> callback method, it will be called after the injection.
However, because we have no control over object&#8217;s lifecycle after that point, <code>@PreDestroy</code> callback will <strong>never</strong> be called).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You should note that the above functionality is not dependent on the serialization format and will work with both
Java and POF serialization (or any other custom serializer), and for any object that is  deserialized on any Coherence
member (or even on a remote client).</p>
</div>
<div class="paragraph">
<p>While the deserialized transient objects are not true Micronaut managed beans, being able to inject Micronaut managed dependencies
into them upon deserialization will likely satisfy most dependency injection requirements you will ever have in those
application components.</p>
</div>

<h1 id="coherenceXmlInjection"><a class="anchor" href="#coherenceXmlInjection"></a>9 Injection of Beans into the Coherence Configuration</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/coherenceXmlInjection.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>You can inject Micronaut beans into the standard Coherence cache configuration file by using the Coherence Micronaut
custom namespace handler.</p>
</div>
<div class="paragraph">
<p>Custom namespace handlers are a standard feature of Coherence that allow the cache configuration file to be customized considerably.</p>
</div>
<div class="paragraph">
<p>The Coherence Micronaut custom namespace handler provides a single additional XML element named <code>&lt;bean&gt;</code> that is
used to declare a named Micronaut bean for injection into the configuration.</p>
</div>
<div class="paragraph">
<p>To use the Coherence Micronaut custom namespace handler it must be declared in the XML configuration file alongside the
other XSD values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0"?&gt;
&lt;cache-config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://xmlns.oracle.com/coherence/coherence-cache-config"
        xmlns:m="class://io.micronaut.coherence.namespace.MicronautNamespaceHandler"   <i class="conum" data-value="1"></i><b>(1)</b>
        xsi:schemaLocation="http://xmlns.oracle.com/coherence/coherence-cache-config coherence-cache-config.xsd"&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The namespace is decalred as <code>xmlns:m="class://io.micronaut.coherence.namespace.MicronautNamespaceHandler"</code>
where <code>io.micronaut.coherence.namespace.MicronautNamespaceHandler</code> is actually the class implementing the custom
namespace handler. The <code>m</code> prefix in <code>xmlns:m</code> means that the custom XML elements should be prefixed with <code>m:</code>
so in this case <code>&lt;m:bean&gt;beanName&lt;/m:bean&gt;</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>&lt;bean&gt;</code> element can be used anywhere in the configuration that an <code>instance</code> element would be used, for example
when declaring interceptors, cache stores, listeners, etc.</p>
</div>
<div class="paragraph">
<p>For examples, with the following entry event interceptor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import javax.inject.Singleton;

import com.tangosol.net.events.EventInterceptor;
import com.tangosol.net.events.annotation.EntryEvents;
import com.tangosol.net.events.annotation.Interceptor;
import com.tangosol.net.events.partition.cache.EntryEvent;

@Singleton
@Named("Foo")   <i class="conum" data-value="1"></i><b>(1)</b>
@Interceptor
@EntryEvents({EntryEvent.Type.INSERTED, EntryEvent.Type.UPDATED, EntryEvent.Type.REMOVED})
public class MyInterceptor implements EventInterceptor&lt;EntryEvent&lt;?, ?&gt;&gt; {
    @Override
    public void onEvent(EntryEvent&lt;?, ?&gt; event) {
        // process the event.
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The interceptor is a <code>@Singleton</code> bean <code>@Named</code> with the name <code>Foo</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This bean can be referenced in the cache configuration file, for example as an interceptor in a cache mapping:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0"?&gt;
&lt;cache-config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://xmlns.oracle.com/coherence/coherence-cache-config"
        xmlns:m="class://io.micronaut.coherence.namespace.MicronautNamespaceHandler"
        xsi:schemaLocation="http://xmlns.oracle.com/coherence/coherence-cache-config coherence-cache-config.xsd"&gt;

    &lt;caching-scheme-mapping&gt;
        &lt;cache-mapping&gt;
            &lt;cache-name&gt;*&lt;/cache-name&gt;
            &lt;scheme-name&gt;distributed-scheme&lt;/scheme-name&gt;
            &lt;interceptors&gt;
                &lt;interceptor&gt;
                    &lt;instance&gt;
                        &lt;m:bean&gt;Foo&lt;/m:bean&gt;   <i class="conum" data-value="1"></i><b>(1)</b>
                    &lt;/instance&gt;
                &lt;/interceptor&gt;
            &lt;/interceptors&gt;
        &lt;/cache-mapping&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>Foo</code> interceptor will be injected into the cache mapping.</td>
</tr>
</table>
</div>

<h1 id="grpc"><a class="anchor" href="#grpc"></a>10 Using gRPC</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/grpc.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Coherence can be configured to run a gRPC proxy service that allows suitably configured gRPC clients to
connect to a cluster and use clustered resources.
The advantage of using a gRPC client rather than a traditional Coherence*Extend client is that gRPC works better with modern cloud infrastructures, being http/2 as opposed to Coherence custom protocol.</p>
</div>

<h2 id="grpcProxy"><a class="anchor" href="#grpcProxy"></a>10.1 Configure a gRPC Proxy Service</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/grpc/grpcProxy.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>To use gRPC the cluster must first be configured to run a gRPC proxy service.</p>
</div>
<div class="paragraph">
<p>TBD&#8230;&#8203;</p>
</div>

<h2 id="grpcClient"><a class="anchor" href="#grpcClient"></a>10.2 Using a gRPC Client</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/grpc/grpcClient.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Once the Coherence cluster is running a gRPC proxy, a client can be configured to connect to it.</p>
</div>
<div class="paragraph">
<p>TBD&#8230;&#8203;</p>
</div>

<h1 id="coherenceHttpSessions"><a class="anchor" href="#coherenceHttpSessions"></a>11 Using Coherence to store HTTP sessions</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/coherenceHttpSessions.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>To use Coherence as a Micronaut HTTP session store add dependency:</p>
</div>
<div class="listingblock">
<div class="title">build.gradle</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">dependency:io.micronaut.coherence:micronaut-coherence-session[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>To enable Coherence sessions via configuration in <code>application.yml</code>:</p>
</div>
<div class="listingblock">
<div class="title">Enabling Coherence Sessions</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">micronaut:
  session:
    http:
      coherence:
        enabled: true
        # Optional: name of the cache that will be used for sessions.
        # By default 'http-sessions' cache will be used.
        cache-name: http-session-cache</code></pre>
</div>
</div>
<div class="paragraph">
<p>Coherence cache will be obtained by using default Coherence session.</p>
</div>
<div class="paragraph">
<p>In case that cache is configured to usie POF serialization additional POF configuration for class <code>io.micronaut.coherence.httpsession.CoherenceSessionStore$CoherenceHttpSession</code> has to be added to the POF config. User can pick appropriate value for <code>type-id</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">    &lt;user-type&gt;
      &lt;type-id&gt;2001&lt;/type-id&gt;
      &lt;class-name&gt;io.micronaut.coherence.httpsession.CoherenceSessionStore$CoherenceHttpSession&lt;/class-name&gt;
    &lt;/user-type&gt;</code></pre>
</div>
</div>

<h1 id="repository"><a class="anchor" href="#repository"></a>12 Repository</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-coherence/edit/master
/src/main/docs/guide/repository.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>You can find the source code of this project in this repository:</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/micronaut-projects/micronaut-coherence">https://github.com/micronaut-projects/micronaut-coherence</a></p>
</div>

    </div>
</div>

<script type="text/javascript">

</script>
</body>
</html>